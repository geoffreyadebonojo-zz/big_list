<%= render 'layouts/nav' %>

<br>
<br>
<div id="item-options">
  <a href="<%= edit_item_path(@item) %>">
    <img src="<%= @item.image %>" alt="add image">
  </a>
  <%= link_to @item.name, edit_item_path(@item) %>
  <div class="link"><%= link_to '<i class="fab fa-youtube"></i>'.html_safe, item_path(@item, :params=>{:cmd=>"youtube"}) %></div>
  <div class="link"><%= link_to '<i class="fab fa-google" aria-hidden="true"></i>'.html_safe, item_path(@item, :params=>{:cmd=>"google"}) %></div>
  <div class="link"><%= link_to '<i class="fab fa-wikipedia-w"></i>'.html_safe, item_path(@item, :params=>{:cmd=>"wikipedia"}) %></div>
  <div class="link"><%= link_to '<i class="fab fa-amazon"></i>'.html_safe, @amazon_link, target:"_blank" %></div>
</div>

<% if @notes %>
  <div class="notes-container">
    <% @notes.each do |note| %>
      <p><%= note.body %></p>
    <% end %>
  </div>
<% end %>

<% if @news %>
  <div class="news-container">
    <% @news.each do |story| %>
    <li><%= story["title"] %></li>
    <% end %>
  </div>
<% end %>

<% if @documentary %>
  <div class="documentaries-container">
    <%= link_to "#{@documentary}", @documentary, target:"_blank" %>
  </div>
<% end %>

<% if @videos %>
<button id="up"><</button>
<button id="reset">Reset</button>
<button id="down">></button>
  <div class="videos-container">
    <% @videos.each do |url| %>
    <div>
      <button onclick="saveVideoAddress('<%= url %>')">SAVE</button>
      <iframe class="video" src="<%= url %>" frameborder="0" allowfullscreen></iframe>
    </div>
    <% end %>
  </div>
<% end %>

<% if @wikipedia_search_term %>
  <div class="wikipedia-container">
    <iframe src="https://en.wikipedia.org/wiki/<%= @wikipedia_search_term %>" id="wikipedia-frame"></iframe>
  </div>
<% end %>

<% if @google_search_results %>
  <div id="google-frame">
    <div>Links:</div>
    <% @google_search_results.each do |result| %>
      <div class="google-search-results-container">
        <%= link_to result[0], result[1], target:"_blank", class: "thumbnail-preview" %>
      </div>
      <hr>
    <% end %>
  </div>
<% end %>

<script>
  function saveVideoAddress(address){
    localStorage.setItem("video", address);
  }

  var vids = document.getElementsByClassName('video');



  console.log(vids);
  document.querySelector('#down').addEventListener('click', function(){
    console.log("++")
    for (var i=0; i< 3; i++) {
      let currentWidth = parseInt(vids[i].style.width.split("px")[0]);
      let currentHeight = parseInt(vids[i].style.height.split("px")[0]);

      console.log(currentWidth);

      newWidth = `${currentWidth + 50}`;
      newHeight = `${currentHeight + 20}`;

      console.log(newWidth);


      vids[i].style.width = `${newWidth}px`;
      vids[i].style.height = `${newHeight}px`;
    }
  });

  document.querySelector('#up').addEventListener('click', function(){
    console.log("++")
    for (var i=0; i< 3; i++) {
      let currentWidth = parseInt(vids[i].style.width.split("px")[0]);
      let currentHeight = parseInt(vids[i].style.height.split("px")[0]);

      console.log(currentWidth);

      newWidth = `${currentWidth - 50}`;
      newHeight = `${currentHeight - 20}`;

      console.log(newWidth);


      vids[i].style.width = `${newWidth}px`;
      vids[i].style.height = `${newHeight}px`;
    }
  });

  document.querySelector('#reset').addEventListener('click', function(){
    console.log("--")
    for (var i=0; i< 3; i++) {
      vids[i].style.width = "323px";
      vids[i].style.height = "200px";
    }
  });

</script>
